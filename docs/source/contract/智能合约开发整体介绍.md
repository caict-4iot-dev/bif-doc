# 1.智能合约开发整体介绍

## 1.1 星火链智能合约简介

目前星火链支持两种智能合约：

- [Solidity智能合约]()。星火链的Solidity合约基本上和以太坊的`Solidity`合约保持一致，有一些地方由于“许可公有”的特性会和以太坊有一定的差异；
- [JavaScript智能合约]()。星火链的`Javascript`合约是执行在集成到星火链的优化的V8虚拟机引擎上的，基本支持Javascript的原生语法，有些语法特性为了适配区块链的特性做了增删。

`Solidity`合约的生态工具更加完善且性能更佳，官方推荐使用`Solidity`智能合约。

## 1.2 星火链智能合约升级

星火链提供了合约升级方法，此方法是覆盖式升级，升级后合约地址不变，旧合约逻辑被覆盖。

如果需要保留旧合约的逻辑，可以参考以太坊的代理控制器合约模式，定义一个接口合约与应用程序交互，架构如下：

![](<D:/doc/区块链/星火链/项目/2024/开发者指南/星火智能合约开发建议/OIbsSy/image/星火智能合约开发建议-第 2 页_uH75krGpXq.png>)

代理控制器合约定义智能合约对外接口，与应用程序交互。代理控制器合约调用控制器合约实现接口功能。

升级合约时，可以写一个新的合约，继承旧版本的控制器合约，并设置一个开关，调用升级后的控制器合约时，通过开关判断是执行新逻辑还是透传到旧的控制器合约。

在数据合约升级的场景，某些情况需要处理历史数据在新旧合约之间的迁移。新的数据合约中可以保持一个指向旧版本数据合约的合约地址，新版本数据合约保存的是增量的数据内容。这样设计简单灵活，但持续不断的版本升级会导致形成较长的链式逻辑关系，维护成本较高。

## 1.3 星火链智能合约生命周期

对于Solidity合约的生命周期，包括【合约编码】->【合约编译】->【合约部署】->【合约调用】->【合约查询】；

对于JavaScript合约的生命周期，包括【合约编码】->【合约部署】->【合约调用】->【合约查询】；

星火链提供了Remix IDE和SDK对星火链的智能合约生命周期管理，见[使用SDK快速体验星火链]()、[使用Remix IDE快速体验星火链]()。

