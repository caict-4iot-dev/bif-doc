# 3.账号权限管理

场景说明：账号A可授权账号B权利值，通过设定权利值可限制账号B的交易权限，账号B可替账号A完成交易操作。

该操作用于设置账户权限。包括签名者权重列表、交易门限、指定类型交易门限。

```json
"source_address": "adxSn8xpL7c2xkxwbreVCs6EZ7KZbBvtDaLtV",//操作源账户，即操作的执行方--账号A
"set_privilege": {
 "master_weight": "10",//可选，当前账户的自身权力值
 "signers"://可选，需要操作的签名者列表
 [
   {
     "address": "adxSj9kGyXR2YpyxwZVMrnGcLWoG3Hf9qXne8",//需要操作的签名者地址,--账号B
     "weight": 8 //可选，签名者的权力值
   }
 ],
 "tx_threshold": "2",//可选，发起交易需要权力值
 "type_thresholds"://可选，不同操作需要的权力值
 [
   {
     "type": 1,//创建账户操作类型
     "threshold": 8 //可选，该操作需要的权力值
   },
   {
     "type": 2,//发行资产操作类型
     "threshold": 9 //可选该操作需要的权力值
   }
 ]
      }
```

## 初始化SDK

```java
import cn.bif.api.BIFSDK;

BIFSDK sdk = BIFSDK.getInstance("http://test.bifcore.bitfactory.cn");   //星火链测试网RPC地址
```

## 设置账号权限

```java
 // 初始化参数
 String senderAddress = "did:bid:zf2bbxDwdzm4g4fJNTH2ah6gbHu6PdAX2";
 String senderPrivateKey = "priSrrfxxMAvnify3iRtTEW2zy87qo4N4B2gwhXSN4WFbXFJUs";
 String masterWeight = "";
 BIFSigner[] signers = new BIFSigner[1];
 BIFSigner s=new BIFSigner();
 s.setAddress("did:bid:efAsXt5zM2Hsq6wCYRMZBS5Q9HvG2EmK");
 s.setWeight(8L);
 signers[0]=s;

 String txThreshold = "2";
 BIFTypeThreshold[] typeThresholds = new BIFTypeThreshold[1];
 BIFTypeThreshold d=new BIFTypeThreshold();
 d.setThreshold(8L);
 d.setType(1);
 typeThresholds[0]=d;

 BIFAccountSetPrivilegeRequest request = new BIFAccountSetPrivilegeRequest();
 request.setSenderAddress(senderAddress);
 request.setPrivateKey(senderPrivateKey);
 request.setSigners(signers);
 request.setTxThreshold(txThreshold);
 request.setMasterWeight(masterWeight);
 request.setTypeThresholds(typeThresholds);
 request.setRemarks("set privilege");
      
 // 调用 setPrivilege 接口
 BIFAccountSetPrivilegeResponse response = sdk.getBIFAccountService().setPrivilege(request);
 if (response.getErrorCode() == 0) {
     System.out.println(JsonUtils.toJSONString(response.getResult()));
 } else {
     System.out.println(JsonUtils.toJSONString(response));
 }

```

## 查询账号权限

```java
 // 初始化请求参数
 String accountAddress = "did:bid:zf2bbxDwdzm4g4fJNTH2ah6gbHu6PdAX2";
 BIFAccountPrivRequest request = new BIFAccountPrivRequest();
 request.setAddress(accountAddress);
      
 // 调用getAccountPriv接口
 BIFAccountPrivResponse response = sdk.getBIFAccountService().getAccountPriv(request);

 if (response.getErrorCode() == 0) {
     BIFAccountPrivResult result = response.getResult();
     System.out.println(JsonUtils.toJSONString(result));
 } else {
     System.out.println(JsonUtils.toJSONString(response));
 }
```
